<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>Tangerine Forms</title>
    <meta name="description" content="tangy description">
    <!-- See https://goo.gl/OOhYW5 -->
    <link rel="manifest" href="/manifest.json">
    <script src="bower_components/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="bower_components/pouchdb/dist/pouchdb.js"></script>
    <link href="fonts/fonts.css" rel="stylesheet">
    <link rel="import" href="src/tangy-app/tangy-app.html">
    <link rel="import" href="bower_components/paper-styles/typography.html">
    <link rel="import" href="bower_components/neon-animation/web-animations.html">
  </head>
  <body>
    <div id="base-path-loader"></div>
    <script>
    function parseQuery(qstr) {
      var query = {};
      var a = (qstr[0] === '?' ? qstr.substr(1) : qstr).split('&');
      for (var i = 0; i < a.length; i++) {
        var b = a[i].split('=');
        query[decodeURIComponent(b[0])] = decodeURIComponent(b[1] || '');
      }
      return query;
    }
    (function() {
      if (window.location.search) {
        let query = parseQuery(window.location.search)
        let formPath = query.form 
        let formDirectory = formPath.substring(0, formPath.lastIndexOf('\/')) + '/'
        console.log(`Setting <base> path using form directory: ${formDirectory}`)
        window['base-path-loader'].innerHTML = `<base href="${formDirectory}">`
      }
    })();
    </script>


     

    </script>
    <tangy-app>    
    </tangy-app>
      <tangy-form linear-mode hide-closed-items id="form-1" on-change="
        item_2.disabled = (response.extra_items) ? false : true
      ">
        <tangy-form-item src="/content/form-1/item-1.html" id="item_1" title="Design Your Pizza"></tangy-form-item>
        <tangy-form-item src="/content/form-1/item-2.html" id="item_2" title="Extra Items"></tangy-form-item>
        <tangy-form-item src="/content/form-1/item-3.html" id="item_3" title="A quick word survey"></tangy-form-item>
        <tangy-form-item src="/content/form-1/item-4.html" id="item_4" title="GPS"></tangy-form-item>
        <tangy-form-item src="/content/form-1/item-5.html" id="item_5" title="Location"></tangy-form-item>
      </tangy-form>
  </body>
</html>
