<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selectable.html">
<!--link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"-->

<!--
`paper-button-group` allows user to select only one button from a set.
Checking one button that belongs to a group unchecks any
previously checked button within the same group. Use
`selected` to get or set the selected button.

Example:

    <paper-button-group selected="small">
      <paper-button name="small">Small</paper-button>
      <paper-button name="medium">Medium</paper-button>
      <paper-button name="large">Large</paper-button>
    </paper-button-group>

See <a href="paper-button">paper-button</a> for more
information about `paper-button`.

@element paper-button-group
@demo demo/index.html
-->
<dom-module id="tangy-button-group">
    <template>
        <slot></slot>
    </template>
    <style>
    
      paper-button {
        margin: 5px;
        background: lightgrey;
      }
      paper-button.iron-selected {
        margin: 5px;
        background: #8BC34A;
      }
 </style>
</dom-module>
<script>
    Polymer({

        is: 'tangy-button-group',
        properties: {
          value: {
            type: String,
            value: ''
          },
          name: {
            type: String,
            value: ''
          }
        },
        behaviors: [
            Polymer.IronSelectableBehavior,
            Polymer.IronA11yKeysBehavior
        ],

        ready: function () {
            // Set properties for iron-selectable-behavior.
            this.selectable = 'paper-button';
            this.selectedAttribute = 'active';
            let input = this.querySelector('input')
            let items = this.querySelectorAll('paper-button')
            this.addEventListener('iron-select', (event) => {
                input.value = items[this.selected].innerHTML
                //input.dispatchEvent(new Event('change'), {bubbles:true})
                input.form.dispatchEvent(new Event('change'), {bubbles:true})
            })
            input.addEventListener('change', (event) => {
                if (input.value) {
                    for (let item of items) {
                       if (item.innerHTML == input.value) {
                           item.click()
                        }
                    }
                }

            })
        }

    });

</script>
